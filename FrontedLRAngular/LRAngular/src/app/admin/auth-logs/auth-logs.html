<div class="container mt-4">
  <!-- Header Section -->
  <div class="row mb-4">
    <div class="col">
      <h1 class="display-5">Logs de Autenticación</h1>
    </div>
  </div>

  <!-- Navigation -->
  <nav class="nav nav-pills mb-4">
    <a class="nav-link" routerLink="/admin/dashboard">Dashboard</a>
    <a class="nav-link" routerLink="/admin/users">Gestión de Usuarios</a>
    <a class="nav-link active" routerLink="/admin/auth-logs">Logs de Autenticación</a>
    <a class="nav-link" routerLink="/admin/blacklist">Blacklist de JWT</a>
  </nav>

  <!-- Filters -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="row g-3">
        <div class="col-md-4">
    
        </div>
        <div class="col-md-4">
          <select class="form-select" [(ngModel)]="selectedAction" (change)="filterByAction(selectedAction)">
            <option value="">Filtrar por acción</option>
            <option value="LOGIN">Login</option>
            <option value="REFRESH">Refresh</option>
            <option value="LOGOUT">Logout</option>
          </select>
        </div>
        <div class="col-md-4">
          <input 
            type="text" 
            class="form-control" 
            placeholder="Filtrar por usuario" 
            [(ngModel)]="selectedUser"
            (input)="filterByUser(selectedUser)"
          >
        </div>
      </div>
    </div>
  </div>

  <!-- Logs Table -->
  <div class="card">
    <div class="card-body">
      <div class="table-responsive">
        <table class="table table-striped table-hover">
          <thead class="table-dark">
            <tr>
              <th>ID</th>
              <th>Usuario</th>
              <th>Acción</th>
              <th>Fecha</th>
              <th>IP</th>
              
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let log of filteredLogs | paginate: { itemsPerPage: itemsPerPage, currentPage: p }">
              <td>{{ log.id }}</td>
              <td>{{ log.username }}</td>
              <td>
                <span [class]="'badge ' + (log.action === 'LOGIN' ? 'bg-success' : 
                                         log.action === 'LOGOUT' ? 'bg-danger' : 
                                         'bg-warning')">
                  {{ log.action }}
                </span>
              </td>
              <td>{{ log.timestamp | date:'medium' }}</td>
              <td>{{ log.ip }}</td>
              
            </tr>
          </tbody>
        </table>

        <!-- Pagination -->
        <div class="d-flex justify-content-between align-items-center mt-3">
          <div class="pagination-info">
            Mostrando {{ (p - 1) * itemsPerPage + 1 }} - 
            {{ p * itemsPerPage > filteredLogs.length ? filteredLogs.length : p * itemsPerPage }}
            de {{ filteredLogs.length }} registros
          </div>
          <pagination-controls 
            (pageChange)="p = $event"
            previousLabel="Anterior"
            nextLabel="Siguiente">
          </pagination-controls>
        </div>
      </div>
    </div>
  </div>
</div>